C51 COMPILER V9.60.0.0   MAIN                                                              01/29/2022 21:16:12 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OMF2 OPTIMIZE(8,SPEED) BROWSE DEBUG PRINT(.\Listings\main.lst) OB
                    -JECT(.\Objects\main.obj)

line level    source

   1          /*
   2           * @Descripttion: 数码管动态显示实现倒计时，并只保留有效位
   3           * @Author: 五月雨
   4           * @Date: 2022-01-13 16:36:08
   5           * @LastEditors: 五月雨
   6           * @LastEditTime: 2022-01-21 15:19:40
   7           * @Board: 清翔51开发板
   8           * @Chip: STC89C52
   9           */
  10          #include <STC89C5xRC.H>
  11          
  12          sbit SEG = P2^6;                    //段选
  13          sbit DIG = P2^7;                    //位选
  14          
  15          unsigned char code LedChar[] = {    //数码管显示字符转换表
  16              0x3F, 0x06, 0x5B, 0x4F, 0x66, 0x6D, 0x7D, 0x07,
  17              0x7F, 0x6F, 0x77, 0x7C, 0x39, 0x5E, 0x79, 0x71
  18          };
  19          
  20          unsigned char LedBuf[] = {          //数码管显示缓冲区
  21              0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
  22          };
  23          bit flag_1s = 0;                //计时满1s标志
  24          
  25          void LedDisplay(unsigned long t);
  26          void LedScan(unsigned char x);
  27          
  28          void main()
  29          {
  30   1          unsigned long sec = 1000;       //计时初值可为0~9999999中的任意数值
  31   1          EA = 1;                         //使能总中断
  32   1          TMOD = 0x10;                    //使用定时器1工作模式1
  33   1          TH0 = 0xFC;                     //中断间隔为1ms
  34   1          TL0 = 0x67;
  35   1          ET0 = 1;                        //使能T1中断
  36   1          TR0 = 1;                        //开启T1定时器
  37   1      
  38   1          while(1)
  39   1          {
  40   2      
  41   2                  flag_1s = 0;
  42   2      
  43   2                  sec--;
  44   2      
  45   2          }
  46   1      }
  47          
  48          
  49          /* T1中断服务函数，完成数码管的动态扫描和显示刷新 */
  50          void InterruptTimer1 () interrupt 1
  51          {
  52   1          static unsigned int cnt = 0;    //中断计数变量
  53   1          static unsigned char idx = 0;   //数码管扫描索引
  54   1          TH0 = 0xFC;             //重载定时器值
C51 COMPILER V9.60.0.0   MAIN                                                              01/29/2022 21:16:12 PAGE 2   

  55   1          TL0 = 0x67;
  56   1      
  57   1      
  58   1      
  59   1      
  60   1      }
*** WARNING C280 IN LINE 52 OF main.c: 'cnt': unreferenced local variable
*** WARNING C280 IN LINE 53 OF main.c: 'idx': unreferenced local variable


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     53    ----
   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     11    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)
